var x=Object.defineProperty;var f=(s,t,o)=>t in s?x(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var _=(s,t,o)=>f(s,typeof t!="symbol"?t+"":t,o);import{j as e,R as d,N as m,c as j,S as P,d as w,o as C,p as v,q as U,t as F,v as S}from"./index-DN-6ne27.js";import{w as b}from"./withAuthRedirect-Ddnzzxd1.js";const y="_users__wrapper_yd1vc_17",N="_users__title_yd1vc_27",z="_users_yd1vc_17",I="_users__btn_yd1vc_61",k="_users__left_yd1vc_73",c={users__wrapper:y,users__title:N,users:z,users__btn:I,users__left:k},q="_users__pagination_1fx35_1",R="_active_1fx35_19",g={users__pagination:q,active:R},$=({pages:s,currentPage:t,onPageChanged:o})=>e.jsx("div",{className:g.users__pagination,children:s.filter(r=>r===1||r===s.length||r>=t-3&&r<=t+3).map((r,n,i)=>e.jsxs(d.Fragment,{children:[n>0&&r-i[n-1]>1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>o(r),className:t===r?g.active:"",children:r})]},r))}),M="/Social/assets/default-profile-CQFvQvjp.webp",Q=({user:s,unfollow:t,follow:o,followingInProgress:r})=>{var n,i,u;return e.jsxs("div",{className:c.users,children:[e.jsxs("div",{className:c.users__left,children:[e.jsx(m,{to:`/profile/${s.id}`,children:e.jsx("img",{src:((n=s.photos)==null?void 0:n.small)||M,alt:s.name})}),s.followed?e.jsx("button",{disabled:r.some(a=>a===s.id),onClick:()=>t(s.id),children:"Unfollow"}):e.jsx("button",{disabled:r.some(a=>a===s.id),onClick:()=>o(s.id),children:"Follow"})]}),e.jsxs("div",{className:c.users__right,children:[e.jsxs("h3",{children:[s.name,e.jsx("br",{}),"(id: ",s.id,")"]}),e.jsxs("h4",{children:["Country: ",((i=s.location)==null?void 0:i.country)||"-",e.jsx("br",{}),"City: ",((u=s.location)==null?void 0:u.city)||"-"]}),e.jsxs("p",{children:["Status: ",s.status||"-"]})]})]})},T=({totalUsersCount:s,pageSize:t,users:o,followingInProgress:r,unfollow:n,follow:i,currentPage:u,onPageChanged:a})=>{const h=Math.ceil(s/t);let p=[];for(let l=1;l<=h;l++)p.push(l);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:c.users__title,children:"Users:"}),e.jsx("div",{className:c.users__wrapper,children:o.map(l=>e.jsx(Q,{user:l,unfollow:n,follow:i,followingInProgress:r},l.id))}),e.jsx($,{pages:p,currentPage:u,onPageChanged:a})]})},A=s=>s.usersPage.users,D=s=>s.usersPage.pageSize,E=s=>s.usersPage.totalUsersCount,L=s=>s.usersPage.currentPage,B=s=>s.usersPage.isFetching,G=s=>s.usersPage.followingInProgress;class H extends d.Component{constructor(){super(...arguments);_(this,"onPageChanged",o=>{this.props.setCurrentPage(o),this.props.requestUsers(o,this.props.pageSize)})}componentDidMount(){this.props.requestUsers(this.props.pageNumber,this.props.pageSize)}render(){return e.jsx(e.Fragment,{children:this.props.isFetching?e.jsx(P,{}):e.jsx(T,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress})})}}const J=s=>({users:A(s),pageSize:D(s),totalUsersCount:E(s),currentPage:L(s),isFetching:B(s),followingInProgress:G(s)}),W=j(b,w(J,{follow:C,unfollow:v,setCurrentPage:U,toggleFollowingProgress:F,requestUsers:S}))(H);export{W as default};
