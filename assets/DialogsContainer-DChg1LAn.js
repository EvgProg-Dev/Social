import{j as s,N as d,u as p,a as u,b as x,s as r,c as h,d as j,e as w}from"./index-DN-6ne27.js";import{w as N}from"./withAuthRedirect-Ddnzzxd1.js";const M="_dialogs_11cfn_1",f="_dialogs__items_11cfn_11",v="_messages__items_wrapper_11cfn_29",b="_messages__items_11cfn_29",S="_sendMessage_11cfn_63",i={dialogs:M,dialogs__items:f,messages__items_wrapper:v,messages__items:b,sendMessage:S},$="_dialogs__item_1wcuk_3",y="_active_1wcuk_21",D="_dialogs__item_img_1wcuk_29",_={dialogs__item:$,active:y,dialogs__item_img:D},k=({id:e,name:t,img:n})=>s.jsxs(d,{to:`/messages/${e}`,className:({isActive:m})=>m?`${_.dialogs__item} ${_.active}`:`${_.dialogs__item}`,children:[s.jsx("img",{className:_.dialogs__item_img,src:n,alt:t}),s.jsx("span",{children:t})]}),C="_messages__item_1qfeu_1",P={messages__item:C},T=({message:e})=>s.jsx(s.Fragment,{children:s.jsx("div",{className:P.messages__item,children:e})}),A=({data:e,isAuth:t})=>{const n=p(),{register:m,handleSubmit:c,reset:g,formState:{errors:o}}=u(),l=a=>{n(r(a.newMessage)),g()};return t?s.jsxs("div",{className:i.dialogs,children:[s.jsx("div",{className:i.dialogs__items,children:e.dialogs.map(a=>s.jsx(k,{...a},a.id))}),s.jsxs("div",{className:i.messages__items_wrapper,children:[s.jsx("div",{className:i.messages__items,children:e.messages.map(a=>s.jsx(T,{message:a.message},a.id))}),s.jsxs("form",{className:i.sendMessage,onSubmit:c(l),children:[s.jsx("input",{type:"text",placeholder:"Enter text...",...m("newMessage",{required:"Enter to text..."})}),s.jsx("button",{type:"submit",className:i.input__button,children:"Send"})]}),s.jsx("div",{className:"error__wrapper",children:o.newMessage&&s.jsx("span",{className:"error__validation",children:o.newMessage.message})})]})]}):s.jsx(x,{to:"/login"})},E=e=>({data:e.messagesPage,newMessageText:e.messagesPage.newMessageText||""}),q=e=>({onSendMessage:()=>{e(r())},onNewMessageChange:t=>{e(w(t))}}),R=h(j(E,q),N)(A);export{R as default};
