import{r as f,j as s,S as d,u as j,a as g,f as u,d as m,g as w,h as P,i as N,k as v,c as b,R as S,l as k,m as A,n as y}from"./index-DN-6ne27.js";import{w as C}from"./withAuthRedirect-Ddnzzxd1.js";const D="_profile__wrappper_ybk54_5",E={profile__wrappper:D},F="_profile_ffsxi_3",T="_img_ffsxi_17",I="_profile__info_ffsxi_29",$="_profile__info_title_ffsxi_37",M="_profile__info_wrapper_ffsxi_45",R="_profile__info_img_ffsxi_65",U="_status__wrapper_ffsxi_81",J="_status__input_ffsxi_101",p={profile:F,img:T,profile__info:I,profile__info_title:$,profile__info_wrapper:M,profile__info_img:R,status__wrapper:U,status__input:J},L=({status:t,updateStatus:e})=>{const[o,i]=f.useState(!1),[r,a]=f.useState(t);f.useEffect(()=>{a(t||"")},[t]);const l=()=>{i(!0)},_=()=>{i(!1),e(r)},x=h=>{a(h.target.value)};return s.jsx("div",{className:p.status__wrapper,children:o?s.jsx("input",{onChange:x,autoFocus:!0,className:p.status__input,type:"text",onBlur:_,value:r}):s.jsx("span",{onDoubleClick:l,children:t||"Add status..."})})},q=({profile:t,status:e,updateStatus:o})=>{var r,a;const i="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png";return t?s.jsxs(s.Fragment,{children:[s.jsx("img",{className:p.img,src:"https://images.pexels.com/photos/290595/pexels-photo-290595.jpeg?cs=srgb&dl=pexels-pixabay-290595.jpg&fm=jpg",alt:"Profile background"}),s.jsxs("div",{className:p.profile,children:[s.jsx("h2",{className:p.profile__info_title,children:"Profile:"}),s.jsxs("div",{className:p.profile__info_wrapper,children:[(r=t.photos)!=null&&r.large?s.jsx("img",{className:p.profile__info_img,src:t.photos.large,alt:`Avatar of ${t.fullName}`}):s.jsx("img",{className:p.profile__info_img,src:i,alt:"Default Avatar"}),s.jsxs("div",{className:p.profile__info,children:[s.jsx("h3",{children:t.fullName||"Unknown User"}),s.jsx(L,{status:e,updateStatus:o}),s.jsxs("p",{children:["Looking for a job:"," ",t.lookingForAJob?"Yes":"No"]}),t.lookingForAJobDescription&&s.jsx("p",{children:lookingForAJobDescription}),s.jsx("h2",{children:"Contacts:"}),s.jsx("a",{href:((a=t.contacts)==null?void 0:a.facebook)||"#",target:"_blank",rel:"noreferrer",children:"Facebook"})]})]})]})]}):s.jsx(d,{})},B="_profile__addpost_1a5s3_5",H="_profile__title_1a5s3_15",Y="_input__wrapper_1a5s3_25",z="_input__button_1a5s3_55",G="_profile__posts_wrapper_1a5s3_67",n={profile__addpost:B,profile__title:H,input__wrapper:Y,input__button:z,profile__posts_wrapper:G},K="_post_1eufd_1",O="_post__info_1eufd_13",Q="_post__item_1eufd_37",V="_favorite__wrapper_1eufd_47",c={post:K,post__info:O,post__item:Q,favorite__wrapper:V},W=({data:t})=>{const{name:e,date:o,postText:i,like:r,dislike:a,img:l}=t;return s.jsxs("div",{className:c.post,children:[s.jsxs("div",{className:c.post__info,children:[s.jsx("img",{src:l,alt:e}),s.jsxs("div",{className:c.post__item,children:[s.jsx("h3",{children:e}),s.jsx("p",{children:o})]})]}),s.jsx("p",{children:i}),s.jsxs("div",{className:c.favorite__wrapper,children:[s.jsxs("button",{children:["[",r,"] 👍 Like"]}),s.jsxs("button",{children:["[",a,"] 👎 Dislike"]})]})]})},X=({data:t})=>{const e=j(),{register:o,handleSubmit:i,reset:r,formState:{errors:a}}=g(),l=_=>{e(u(_.newPost)),r()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:n.profile__addpost,children:[s.jsx("h2",{className:n.profile__title,children:"Add post:"}),s.jsxs("form",{className:n.input__wrapper,onSubmit:i(l),children:[s.jsx("input",{type:"text",placeholder:"Enter text...",...o("newPost",{required:"Enter to text..."})}),s.jsx("button",{type:"submit",className:n.input__button,children:"Add post"})]}),s.jsx("div",{className:"error__wrapper",children:a.newPost&&s.jsx("span",{className:"error__validation",children:a.newPost.message})})]}),s.jsxs("div",{className:n.profile__posts,children:[s.jsx("h2",{className:n.profile__title,children:"Posts:"}),s.jsx("div",{className:n.profile__posts_wrapper,children:t.map(_=>s.jsx(W,{data:_},_.id))})]})]})},Z=t=>({data:t.profilePage.posts,newPostText:t.profilePage.newPostText}),ss=t=>({onPostChange:e=>t(w(e)),onAddPost:()=>t(u())}),ts=m(Z,ss)(X),es=({profile:t,status:e,updateStatus:o})=>s.jsxs("section",{children:[s.jsx(q,{profile:t,status:e,updateStatus:o}),s.jsx("div",{className:E.profile__wrappper,children:s.jsx(ts,{})})]}),os=t=>e=>{const o=P(),i=N(),r=v();return s.jsx(t,{...e,router:{params:o,navigate:i,location:r}})};class rs extends S.Component{componentDidMount(){const{params:e}=this.props.router,o=e.userId||this.props.myId;this.props.getUserProfile(o),this.props.getStatus(o)}render(){return this.props.profile?s.jsx(es,{...this.props,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}):s.jsx(d,{})}}const is=t=>({profile:t.profilePage.profile,status:t.profilePage.status,myId:t.auth.id,isAuth:t.auth.isAuth}),ns=b(m(is,{getUserProfile:k,getStatus:A,updateStatus:y}),os,C)(rs);export{ns as default};
